# Jeffrey CLI Init Command Configuration
# Usage: java -jar target/jeffrey-cli.jar init jeffrey-init.conf

# Jeffrey home directory path
jeffrey-home = "/tmp/jeffrey"

# Profiler configuration
profiler-path = "/tmp/jeffrey/libs/current/libasyncProfiler.so"

# Project identification
project {
    workspace-id = "uat"
    name = "jeffrey"
    label = "Jeffrey"
}

# Features

# Performance counters
# It's automatically used to detect finished session
perf-counters {
    enabled = true
}

# Heap dump on OutOfMemoryError
heap-dump {
    enabled = true
    type = "crash"  # "exit" or "crash"
}

# JVM logging with <<JEFFREY_CURRENT_SESSION>> placeholder for file path
# Use '-jvm.log' suffix to automatically recognize the file as a JVM log file by Jeffrey
jvm-logging {
    enabled = true
    command = "jfr*=trace:file=<<JEFFREY_CURRENT_SESSION>>/jfr-jvm.log::filecount=3,filesize=5m"
}

# Messaging - enables jeffrey.ImportantMessage JFR events
# with a dedicated repository for real-time message consumption
messaging {
    enabled = true
    max-age = "24h"  # How long to keep messages (e.g., 12h, 1d, 30m)
}

# Heartbeat - enables periodic jeffrey.Heartbeat JFR events
# for reliable session liveness detection
heartbeat {
    enabled = true
    period = "5 s"
}

# JDK Java Options - exports JDK_JAVA_OPTIONS environment variable
jdk-java-options {
    enabled = true
    additional-options = "-Xmx1200m -Xms1200m -XX:+UseG1GC -XX:+AlwaysPreTouch"
}

# Attributes (key-value map)
# Supports HOCON substitution: ${VAR} (required) or ${?VAR} (optional)
attributes {
    cluster = "blue"
    namespace = "klingon"
}
